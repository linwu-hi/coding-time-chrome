![chrome](/public/chrome.png)

# **æ¦‚è¿°**

å…¨ç½‘æœ€è¯¦ç»†çš„è°·æ­Œæ’ä»¶å¼€å‘å°å†ŒğŸ‘ğŸ»ï¼Œä¹‹å‰å†™è°·æ­Œæ’ä»¶çš„æ—¶å€™ç»•äº†ä¸€åœˆç½‘ä¸Šçš„æ•™ç¨‹ï¼Œæ²¡æœ‰å‘ç°æ¯”è¾ƒå¥½çš„æ–‡æ¡£æ•™ç¨‹ï¼Œç´¢æ€§æ ¹æ®å®˜æ–¹æ–‡æ¡£æ¢³ç†ä¸€éï¼Œé¿å…åé¢å­¦ä¹ çš„åŒå­¦ç»§ç»­è¸©å‘ï¼ï¼ï¼

## **ç›®å½•**

- [**æ¦‚è¿°**](#%E6%A6%82%E8%BF%B0)
  - [**ç›®å½•**](#%E7%9B%AE%E5%BD%95)
  - [**Chromeæ’ä»¶**](#chrome%E6%8F%92%E4%BB%B6)
  - [**æ’ä»¶çš„åŸºæœ¬æ„æˆ**](#%E6%8F%92%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9E%84%E6%88%90)
    - [**Manifestæ–‡ä»¶**](#manifest%E6%96%87%E4%BB%B6)
    - [**èƒŒæ™¯è„šæœ¬(Background Scripts)**](#%E8%83%8C%E6%99%AF%E8%84%9A%E6%9C%AC(background-scripts))
    - [**å†…å®¹è„šæœ¬(Content Scripts)**](#%E5%86%85%E5%AE%B9%E8%84%9A%E6%9C%AC(content-scripts))
    - [**å¼¹å‡ºé¡µé¢(Popup Pages)**](#%E5%BC%B9%E5%87%BA%E9%A1%B5%E9%9D%A2(popup-pages))
    - [**é€‰é¡¹é¡µé¢(Options Pages)**](#%E9%80%89%E9%A1%B9%E9%A1%B5%E9%9D%A2(options-pages))
  - [**æ’ä»¶ç”Ÿå‘½å‘¨æœŸä¸äº‹ä»¶ç³»ç»Ÿ**](#%E6%8F%92%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%8E%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F)
    - [**æ’ä»¶ç”Ÿå‘½å‘¨æœŸ**](#%E6%8F%92%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F)
    - [**äº‹ä»¶ç³»ç»Ÿ**](#%E4%BA%8B%E4%BB%B6%E7%B3%BB%E7%BB%9F)
      - [**æµè§ˆå™¨äº‹ä»¶**](#%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BA%8B%E4%BB%B6)
      - [**ç½‘ç»œäº‹ä»¶**](#%E7%BD%91%E7%BB%9C%E4%BA%8B%E4%BB%B6)
      - [**ç”¨æˆ·äº‹ä»¶**](#%E7%94%A8%E6%88%B7%E4%BA%8B%E4%BB%B6)
  - [**æ’ä»¶æƒé™ç³»ç»Ÿä¸å†…å®¹å®‰å…¨ç­–ç•¥(CSP)**](#%E6%8F%92%E4%BB%B6%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F%E4%B8%8E%E5%86%85%E5%AE%B9%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%EF%BC%88csp%EF%BC%89)
    - [**æ’ä»¶æƒé™ç³»ç»Ÿ**](#%E6%8F%92%E4%BB%B6%E6%9D%83%E9%99%90%E7%B3%BB%E7%BB%9F)
    - [**å†…å®¹å®‰å…¨ç­–ç•¥(CSP)**](#**-%E5%86%85%E5%AE%B9%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5%EF%BC%88csp%EF%BC%89**)
  - [**æ·±å…¥äº†è§£Chrome API**](#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3chrome-api**)
    - [**æ’ä»¶ä¸­çš„æ¶ˆæ¯ä¼ é€’**](#%E6%8F%92%E4%BB%B6%E4%B8%AD%E7%9A%84%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92)
    - [**ä½¿ç”¨tabs API**](#%E4%BD%BF%E7%94%A8tabs-api)
    - [**ä½¿ç”¨bookmarks API**](#%E4%BD%BF%E7%94%A8bookmarks-api)
    - [**ä½¿ç”¨notifications API**](#%E4%BD%BF%E7%94%A8notifications-api)
    - [**ä½¿ç”¨webRequest API**](#%E4%BD%BF%E7%94%A8webrequest-api)
    - [**æ›´å¤šAPI**](#%E6%9B%B4%E5%A4%9Aapi)
      - [**storage API**](#storage-api)
      - [**alarms API**](#alarms-api)
      - [**contextMenus API**](#contextmenus-api)
  - [**ä¸ç½‘é¡µå†…å®¹è¿›è¡Œäº¤äº’**](#%E4%B8%8E%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E8%BF%9B%E8%A1%8C%E4%BA%A4%E4%BA%92)
  - [**ä¿å­˜ç”¨æˆ·è®¾ç½®å’Œæ•°æ®**](#%E4%BF%9D%E5%AD%98%E7%94%A8%E6%88%B7%E8%AE%BE%E7%BD%AE%E5%92%8C%E6%95%B0%E6%8D%AE)
  - [**å®ç°æ’ä»¶çš„å›½é™…åŒ–**](#%E5%AE%9E%E7%8E%B0%E6%8F%92%E4%BB%B6%E7%9A%84%E5%9B%BD%E9%99%85%E5%8C%96)
  - [**æ’ä»¶æµ‹è¯•ä¸è°ƒè¯•**](#%E6%8F%92%E4%BB%B6%E6%B5%8B%E8%AF%95%E4%B8%8E%E8%B0%83%E8%AF%95)
    - [**Chromeæ’ä»¶çš„è°ƒè¯•æŠ€å·§**](#chrome%E6%8F%92%E4%BB%B6%E7%9A%84%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7)
    - [**ä½¿ç”¨automated testingè¿›è¡Œæ’ä»¶æµ‹è¯•**](#%E4%BD%BF%E7%94%A8automated-testing%E8%BF%9B%E8%A1%8C%E6%8F%92%E4%BB%B6%E6%B5%8B%E8%AF%95)
    - [**ä½¿ç”¨DevToolsè¿›è¡Œæ€§èƒ½åˆ†æ**](#%E4%BD%BF%E7%94%A8devtools%E8%BF%9B%E8%A1%8C%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90)
  - [**æ’ä»¶å‘å¸ƒä¸ç»´æŠ¤**](#%E6%8F%92%E4%BB%B6%E5%8F%91%E5%B8%83%E4%B8%8E%E7%BB%B4%E6%8A%A4)
    - [**åœ¨Chrome Web Storeå‘å¸ƒå’Œæ›´æ–°æ’ä»¶**](#%E5%9C%A8chrome-web-store%E5%8F%91%E5%B8%83%E5%92%8C%E6%9B%B4%E6%96%B0%E6%8F%92%E4%BB%B6)
    - [**æ’ä»¶çš„ç‰ˆæœ¬ç®¡ç†ä¸é”™è¯¯å¤„ç†**](#%E6%8F%92%E4%BB%B6%E7%9A%84%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E4%B8%8E%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86)
    - [**æ’ä»¶çš„å®‰å…¨æ€§å’Œéšç§ä¿æŠ¤**](#%E6%8F%92%E4%BB%B6%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E5%92%8C%E9%9A%90%E7%A7%81%E4%BF%9D%E6%8A%A4)
  - [**å‚è€ƒèµ„æ–™**](#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99)

## **Chromeæ’ä»¶**

Chromeæ’ä»¶ï¼Œæˆ–ç§°ä¸ºæ‰©å±•ï¼Œæ˜¯ä¸€ç§ä¸“ä¸ºGoogle Chromeæµè§ˆå™¨è®¾è®¡çš„è½¯ä»¶åº”ç”¨ç¨‹åºã€‚æ’ä»¶å¯ä»¥è®©å¼€å‘è€…å‘æµè§ˆå™¨ä¸­æ·»åŠ æ–°çš„ç‰¹æ€§æˆ–åŠŸèƒ½ï¼Œæˆ–è€…å¯¹ç°æœ‰çš„åŠŸèƒ½è¿›è¡Œå¢å¼ºæˆ–æ”¹å˜ã€‚ä»æ”¹å˜æµè§ˆå™¨çš„è§†è§‰ä¸»é¢˜ï¼Œåˆ°é˜»æ­¢å¹¿å‘Šï¼Œä»ç®¡ç†å¯†ç åˆ°åŠ å¼ºç½‘ç»œå®‰å…¨ï¼ŒChromeæ’ä»¶çš„ä½¿ç”¨åœºæ™¯å‡ ä¹æ— æ‰€ä¸åŒ…ï¼Œç»™ç”¨æˆ·å¸¦æ¥é«˜åº¦å®šåˆ¶åŒ–çš„æµè§ˆä½“éªŒã€‚

æ’ä»¶è¿è¡Œåœ¨Chromeæµè§ˆå™¨çš„æ²™ç›’ç¯å¢ƒä¸­ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œï¼Œä½†ä¸ä¼šå½±å“åˆ°è®¡ç®—æœºçš„å…¶ä»–éƒ¨åˆ†ã€‚è¿™ç§è®¾è®¡ä¿è¯äº†æµè§ˆå™¨çš„ç¨³å®šæ€§å’Œç”¨æˆ·çš„å®‰å…¨ã€‚

æ’ä»¶çš„å¼€å‘ä¸»è¦ä¾èµ–äºWebæŠ€æœ¯ï¼ŒåŒ…æ‹¬HTMLã€CSSå’ŒJavaScriptï¼Œå› æ­¤ï¼Œä»»ä½•æœ‰Webå¼€å‘ç»éªŒçš„äººéƒ½èƒ½å¤Ÿç›¸å¯¹å®¹æ˜“åœ°å¼€å§‹Chromeæ’ä»¶çš„å¼€å‘ã€‚ç„¶è€Œï¼Œç”±äºChromeæ’ä»¶éœ€è¦ä¸æµè§ˆå™¨ç´§å¯†äº¤äº’ï¼Œå› æ­¤è¿˜éœ€è¦å­¦ä¹ ä¸€äº›ç‰¹å®šçš„çŸ¥è¯†ï¼Œæ¯”å¦‚Chromeçš„APIã€æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€æ¶ˆæ¯ä¼ é€’æœºåˆ¶ç­‰ã€‚

## **æ’ä»¶çš„åŸºæœ¬æ„æˆ**

### **[Manifestæ–‡ä»¶](https://developer.chrome.com/docs/extensions/mv3/manifest/)**

Manifestæ–‡ä»¶æ˜¯ä¸€ä¸ªæ’ä»¶çš„å…ƒæ•°æ®ï¼Œå®ƒå‘Šè¯‰Chromeæ’ä»¶çš„åç§°ã€æè¿°ã€ç‰ˆæœ¬ã€æƒé™ä»¥åŠå…¶ä»–æ’ä»¶éœ€è¦çš„å±æ€§ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„manifest.jsonæ–‡ä»¶ï¼š

```json
{
  "manifest_version": 2,
  "name": "My First Extension",
  "description": "This is a sample Chrome Extension",
  "version": "1.0",
  "icons": {
    "48": "icon.png",
    "128": "icon_large.png"
  },
  "permissions": [
    "activeTab",
    "storage",
    "https://*.mywebsite.com/*"
  ],
  "background": {
    "scripts": ["background.js"],
    "persistent": false
  },
  "content_scripts": [
    {
      "matches": ["https://*.google.com/*"],
      "js": ["content.js"],
      "run_at": "document_end"
    }
  ],
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html",
    "default_title": "Open the popup"
  },
  "options_page": "options.html",
  "web_accessible_resources": [
    "script.js",
    "style.css"
  ]
}

```

ä¸Šé¢çš„manifestæ–‡ä»¶å£°æ˜äº†ä¸€ä¸ªæ’ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¹¶æŒ‡å®šäº†æ’ä»¶çš„èƒŒæ™¯è„šæœ¬ã€å¼¹å‡ºçª—å£ä»¥åŠæƒé™ã€‚

### **èƒŒæ™¯è„šæœ¬(Background Scripts)**

èƒŒæ™¯è„šæœ¬æ˜¯æ’ä»¶çš„ä¸»è¦å·¥ä½œåŒºåŸŸï¼Œå®ƒå¯ä»¥ç›‘å¬æµè§ˆå™¨äº‹ä»¶ï¼Œæ‰§è¡Œé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œæˆ–è€…ç®¡ç†æ’ä»¶çš„å…¶ä»–éƒ¨åˆ†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„èƒŒæ™¯è„šæœ¬ï¼š

```javascript
// background.js
chrome.browserAction.onClicked.addListener(function(tab) {
  chrome.tabs.executeScript({
    code: 'document.body.style.backgroundColor="green"'
  });
});
```

è¿™ä¸ªè„šæœ¬ç›‘å¬æµè§ˆå™¨åŠ¨ä½œçš„ç‚¹å‡»äº‹ä»¶ï¼Œç„¶ååœ¨å½“å‰æ ‡ç­¾é¡µæ‰§è¡Œä¸€ä¸ªç®€å•çš„è„šæœ¬ï¼Œå°†é¡µé¢èƒŒæ™¯è®¾ä¸ºç»¿è‰²ã€‚

### **å†…å®¹è„šæœ¬(Content Scripts)**

å†…å®¹è„šæœ¬æ˜¯æ’å…¥åˆ°ç½‘é¡µä¸­çš„è„šæœ¬ï¼Œå®ƒä»¬å¯ä»¥ç›´æ¥è®¿é—®å’Œä¿®æ”¹ç½‘é¡µçš„DOMã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå†…å®¹è„šæœ¬çš„ä¾‹å­ï¼Œå®ƒåœ¨é¡µé¢åŠ è½½å®Œæˆåï¼Œå°†æ‰€æœ‰çš„é“¾æ¥å˜ä¸ºçº¢è‰²ï¼š

```javascript
// content.js
window.onload = function() {
  var links = document.getElementsByTagName('a');
  for(var i = 0; i < links.length; i++) {
    links[i].style.color = 'red';
  }
};
```

### **å¼¹å‡ºé¡µé¢(Popup Pages)**

å¼¹å‡ºé¡µé¢æ˜¯æ’ä»¶çš„ç”¨æˆ·ç•Œé¢ï¼Œå®ƒä»¬åœ¨ç”¨æˆ·ç‚¹å‡»æ’ä»¶å›¾æ ‡æ—¶æ˜¾ç¤ºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¼¹å‡ºé¡µé¢çš„HTMLä»£ç ï¼Œå®ƒæ˜¾ç¤ºä¸€ä¸ªç®€å•çš„æ¬¢è¿æ¶ˆæ¯ï¼š

```html
<!-- popup.html -->
<!DOCTYPE html>
<html>
<body>
<h1>Welcome to My Extension!</h1>
</body>
</html>
```

### **é€‰é¡¹é¡µé¢(Options Pages)**

é€‰é¡¹é¡µé¢æ˜¯æ’ä»¶çš„è®¾ç½®é¡µé¢ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å®ƒæ¥è‡ªå®šä¹‰æ’ä»¶çš„è¡Œä¸ºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªé€‰é¡¹é¡µé¢çš„ä¾‹å­ï¼š

```html
<!-- options.html -->
<!DOCTYPE html>
<html>
<body>
<h1>Extension Options</h1>
<label>Background color: <input type="text" id="bgColor"></label>
<button id="save">Save</button>
<script src="options.js"></script>
</body>
</html>
```

åœ¨ä¸Šé¢çš„é€‰é¡¹é¡µé¢ä¸­ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥ä¸€ä¸ªé¢œè‰²ï¼Œç„¶åç‚¹å‡»ä¿å­˜æŒ‰é’®æ¥æ”¹å˜æ’ä»¶çš„èƒŒæ™¯é¢œè‰²ã€‚è¿™éœ€è¦é…åˆä¸€ä¸ªoptions.jsè„šæœ¬æ¥å®ç°ï¼š

```javascript
document.getElementById('save').onclick = function() {
  var color = document.getElementById('bgColor').value;
  chrome.storage.sync

.set({backgroundColor: color});
};
```

## **æ’ä»¶ç”Ÿå‘½å‘¨æœŸä¸äº‹ä»¶ç³»ç»Ÿ**

æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æŒ‡ä»ç”¨æˆ·å®‰è£…æˆ–æ›´æ–°æ’ä»¶ï¼Œåˆ°ç”¨æˆ·å¸è½½æ’ä»¶çš„è¿‡ç¨‹ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ’ä»¶å¯ä»¥å“åº”å„ç§æµè§ˆå™¨æˆ–ç”¨æˆ·äº‹ä»¶ï¼Œæ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚

### **æ’ä»¶ç”Ÿå‘½å‘¨æœŸ**

æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸»è¦åŒ…å«ä»¥ä¸‹é˜¶æ®µï¼š

- å®‰è£…æˆ–æ›´æ–°ï¼šç”¨æˆ·ç¬¬ä¸€æ¬¡å®‰è£…æ’ä»¶ï¼Œæˆ–è€…æ’ä»¶æœ‰æ–°çš„ç‰ˆæœ¬å¯ä¾›æ›´æ–°æ—¶ï¼Œæµè§ˆå™¨ä¼šåŠ è½½å¹¶åˆå§‹åŒ–æ’ä»¶ã€‚æ­¤æ—¶ï¼Œæ’ä»¶å¯ä»¥åœ¨backgroundè„šæœ¬ä¸­ç›‘å¬`chrome.runtime.onInstalled`äº‹ä»¶ï¼Œæ‰§è¡Œåˆå§‹åŒ–æ“ä½œã€‚

```javascript
chrome.runtime.onInstalled.addListener(function(details) {
  if (details.reason == "install") {
    console.log("This is a first install!");
  } else if (details.reason == "update") {
    console.log("Updated from " + details.previousVersion + " to " + chrome.runtime.getManifest().version + "!");
  }
});
```

- å¯åŠ¨ï¼šç”¨æˆ·æ‰“å¼€æµè§ˆå™¨æ—¶ï¼Œæ’ä»¶ä¼šè¢«å¯åŠ¨ã€‚æ’ä»¶å¯ä»¥åœ¨è¿™ä¸ªé˜¶æ®µåˆå§‹åŒ–æ•°æ®ï¼Œè®¾ç½®é»˜è®¤çŠ¶æ€ç­‰ã€‚

```javascript
chrome.runtime.onStartup.addListener(function() {
  console.log("Browser started, initialize plugin data.");
});
```

- è¿è¡Œï¼šæ’ä»¶è¢«å¯åŠ¨åï¼Œå°±è¿›å…¥äº†è¿è¡Œé˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæ’ä»¶å¯ä»¥å“åº”ç”¨æˆ·æ“ä½œï¼Œç›‘å¬å’Œå¤„ç†æµè§ˆå™¨äº‹ä»¶ï¼Œæä¾›å„ç§åŠŸèƒ½ã€‚

```javascript
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
  if (changeInfo.status == 'complete' && tab.active) {
    console.log("Active tab updated, let's do something!");
  }
});
```

- åœæ­¢ï¼šç”¨æˆ·å…³é—­æµè§ˆå™¨æ—¶ï¼Œæ’ä»¶ä¼šè¢«åœæ­¢ã€‚æ’ä»¶å¯ä»¥ç›‘å¬`chrome.runtime.onSuspend`äº‹ä»¶ï¼Œä¿å­˜æ•°æ®ï¼Œæ¸…ç†èµ„æºç­‰ã€‚

```javascript
chrome.runtime.onSuspend.addListener(function() {
  console.log("Browser is about to close, save plugin data.");
});
```

- å¸è½½ï¼šç”¨æˆ·ä»æµè§ˆå™¨ä¸­å¸è½½æ’ä»¶æ—¶ï¼Œæ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸå°±ç»“æŸäº†ã€‚æ’ä»¶å¯ä»¥ç›‘å¬`chrome.runtime.onInstalled`äº‹ä»¶çš„`uninstall`åŸå› ï¼Œæ‰§è¡Œå¸è½½æ“ä½œã€‚

```javascript
chrome.runtime.setUninstallURL("https://your_website.com/uninstall", function() {
  console.log("Uninstall URL has been set");
});
```

### **äº‹ä»¶ç³»ç»Ÿ**

Chromeæ’ä»¶çš„äº‹ä»¶ç³»ç»Ÿå…è®¸æ’ä»¶å“åº”å„ç§æµè§ˆå™¨å’Œç”¨æˆ·äº‹ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„äº‹ä»¶ï¼š
#### **æµè§ˆå™¨äº‹ä»¶**

- **æµè§ˆå™¨å¯åŠ¨äº‹ä»¶ï¼š** ä½ å¯ä»¥é€šè¿‡ç›‘å¬ `chrome.runtime.onStartup` äº‹ä»¶æ¥çŸ¥é“æµè§ˆå™¨å¯åŠ¨ã€‚

```javascript
chrome.runtime.onStartup.addListener(function() {
    console.log("Browser has been started.");
});
```

- **æµè§ˆå™¨å…³é—­äº‹ä»¶ï¼š** Chromeæ²¡æœ‰æä¾›æµè§ˆå™¨å…³é—­çš„ç›´æ¥äº‹ä»¶ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨`chrome.windows.onRemoved`äº‹ä»¶åœ¨æœ€åä¸€ä¸ªæµè§ˆå™¨çª—å£å…³é—­æ—¶æ‰§è¡Œæ“ä½œã€‚

```javascript
chrome.windows.onRemoved.addListener(function(windowId) {
    chrome.windows.getAll({}, function(windows) {
        if(windows.length == 0) {
            console.log("Browser is closing, the last window was closed.");
        }
    });
});
```

- **æ‰“å¼€æ–°çª—å£äº‹ä»¶ï¼š** ä½ å¯ä»¥é€šè¿‡ç›‘å¬ `chrome.windows.onCreated` äº‹ä»¶æ¥çŸ¥é“æ–°çª—å£æ‰“å¼€ã€‚

```javascript
chrome.windows.onCreated.addListener(function() {
    console.log("New window opened.");
});
```

- **å…³é—­çª—å£äº‹ä»¶ï¼š** ä½ å¯ä»¥é€šè¿‡ç›‘å¬ `chrome.windows.onRemoved` äº‹ä»¶æ¥çŸ¥é“çª—å£å…³é—­ã€‚

```javascript
chrome.windows.onRemoved.addListener(function(windowId) {
    console.log("Window with id " + windowId + " was closed.");
});
```

- **åˆ‡æ¢æ ‡ç­¾é¡µäº‹ä»¶ï¼š** ä½ å¯ä»¥é€šè¿‡ç›‘å¬ `chrome.tabs.onActivated` äº‹ä»¶æ¥çŸ¥é“æ ‡ç­¾é¡µåˆ‡æ¢ã€‚

```javascript
chrome.tabs.onActivated.addListener(function(activeInfo) {
    console.log("Tab with id " + activeInfo.tabId + " is now active.");
});
```

#### **ç½‘ç»œäº‹ä»¶**

- **è¯·æ±‚å‘é€äº‹ä»¶ï¼š** ä½ å¯ä»¥é€šè¿‡ç›‘å¬ `chrome.webRequest.onBeforeRequest` äº‹ä»¶æ¥çŸ¥é“è¯·æ±‚å‘é€ã€‚

```javascript
chrome.webRequest.onBeforeRequest.addListener(
    function(details) {
        console.log("Request is about to be sent: ", details);
    },
    {urls: ["<all_urls>"]}
);
```

- **å“åº”æ¥æ”¶äº‹ä»¶ï¼š** ä½ å¯ä»¥é€šè¿‡ç›‘å¬ `chrome.webRequest.onCompleted` äº‹ä»¶æ¥çŸ¥é“å“åº”æ¥æ”¶ã€‚

```javascript
chrome.webRequest.onCompleted.addListener(
    function(details) {
        console.log("Request completed: ", details);
    },
    {urls: ["<all_urls>"]}
);
```

- **è¿æ¥é”™è¯¯äº‹ä»¶ï¼š** ä½ å¯ä»¥é€šè¿‡ç›‘å¬ `chrome.webRequest.onErrorOccurred` äº‹ä»¶æ¥çŸ¥é“è¿æ¥é”™è¯¯ã€‚

```javascript
chrome.webRequest.onErrorOccurred.addListener(
    function(details) {
        console.log("Error occurred while making request: ", details);
    },
    {urls: ["<all_urls>"]}
);
```

#### **ç”¨æˆ·äº‹ä»¶**

- **ç‚¹å‡»æ’ä»¶å›¾æ ‡äº‹ä»¶ï¼š** ä½ å¯ä»¥é€šè¿‡ç›‘å¬ `chrome.browserAction.onClicked` äº‹ä»¶æ¥çŸ¥é“æ’ä»¶å›¾æ ‡è¢«ç‚¹å‡»ã€‚

```javascript
chrome.browserAction.onClicked.addListener(function(tab) {
    console.log("Plugin icon clicked in tab with id " + tab.id + ".");
});
```

- **é€‰æ‹©æ’ä»¶èœå•äº‹ä»¶ï¼š** é¦–å…ˆéœ€è¦åˆ›å»ºèœå•ï¼Œç„¶åé€šè¿‡ç›‘å¬ `chrome.contextMenus.onClicked` äº‹ä»¶æ¥çŸ¥é“æ’ä»¶èœå•è¢«é€‰æ‹©ã€‚

```javascript
chrome.contextMenus.create({
    id: "sampleContextMenu",
    title: "Sample Context Menu",
    contexts: ["page"]
});

chrome.contextMenus.onClicked.addListener(function(info, tab) {
    if (info.menuItemId == "sampleContextMenu") {
        console.log("Sample Context Menu clicked.");


    }
});
```

- **ä½¿ç”¨å¿«æ·é”®äº‹ä»¶ï¼š** å¿«æ·é”®éœ€è¦åœ¨ `manifest.json` æ–‡ä»¶ä¸­å®šä¹‰ï¼Œç„¶åé€šè¿‡ç›‘å¬ `chrome.commands.onCommand` äº‹ä»¶æ¥çŸ¥é“å¿«æ·é”®è¢«ä½¿ç”¨ã€‚

```javascript
chrome.commands.onCommand.addListener(function(command) {
    console.log('User triggered command: ' + command);
});
```

## **æ’ä»¶æƒé™ç³»ç»Ÿä¸å†…å®¹å®‰å…¨ç­–ç•¥(CSP)**

Chromeæ’ä»¶éœ€è¦åœ¨manifestæ–‡ä»¶ä¸­å£°æ˜å…¶æ‰€éœ€çš„æƒé™ï¼Œå¦‚è®¿é—®æµè§ˆå†å²ï¼Œä¿®æ”¹ç½‘é¡µå†…å®¹ç­‰ã€‚æ­¤å¤–ï¼Œä¸ºäº†ä¿æŠ¤ç”¨æˆ·ï¼ŒChromeè¿˜å®æ–½äº†å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰ï¼Œé™åˆ¶æ’ä»¶å¯ä»¥ä»å“ªäº›æºåŠ è½½èµ„æºã€‚

### **æ’ä»¶æƒé™ç³»ç»Ÿ**

æ’ä»¶éœ€è¦çš„æƒé™éœ€è¦åœ¨ `manifest.json` æ–‡ä»¶ä¸­çš„ `"permissions"` éƒ¨åˆ†è¿›è¡Œå£°æ˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ’ä»¶éœ€è¦è®¿é—®ç”¨æˆ·çš„æµè§ˆå†å²ï¼Œé‚£ä¹ˆå®ƒéœ€è¦æ·»åŠ  `"history"` æƒé™ï¼š

```json
{
  "name": "My extension",
  ...
  "permissions": [
    "history"
  ],
  ...
}
```

æƒé™çš„ç§ç±»å¾ˆå¤šï¼Œä¸åŒçš„æƒé™å¯¹åº”æ’ä»¶å¯ä»¥è®¿é—®çš„APIå’Œèµ„æºã€‚æ›´å¤šæƒé™å¯ä»¥åœ¨ [Chrome æ‰©å±•å®˜æ–¹æ–‡æ¡£](https://developer.chrome.com/docs/extensions/mv3/declare_permissions/) ä¸­æŸ¥è¯¢ã€‚

### **å†…å®¹å®‰å…¨ç­–ç•¥(CSP)**

å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆContent Security Policyï¼Œç®€ç§°CSPï¼‰æ˜¯ä¸€ç§å®‰å…¨æ ‡å‡†ï¼Œç”¨äºé¢„é˜²è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰å’Œæ•°æ®æ³¨å…¥æ”»å‡»ã€‚é»˜è®¤çš„CSPç­–ç•¥ç¦æ­¢æ‰©å±•åŠ è½½è¿œç¨‹JavaScriptæˆ–CSSï¼Œåªå…è®¸ä»æ‰©å±•åŒ…å†…éƒ¨åŠ è½½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸èƒ½ç›´æ¥åœ¨ä½ çš„HTMLæ–‡ä»¶ä¸­å¼•ç”¨ä¸€ä¸ªå¤–éƒ¨çš„JSæˆ–CSSæ–‡ä»¶ï¼Œæ‰€æœ‰çš„JSå’ŒCSSéƒ½åº”è¯¥ä»¥æ–‡ä»¶çš„å½¢å¼åŒ…å«åœ¨æ‰©å±•åŒ…ä¸­ã€‚

å¦‚æœä½ éœ€è¦ä¿®æ”¹CSPç­–ç•¥ï¼Œä¾‹å¦‚ä½ éœ€è¦ä»ç‰¹å®šçš„è¿œç¨‹æœåŠ¡å™¨åŠ è½½è„šæœ¬æˆ–æ ·å¼ï¼Œä½ å¯ä»¥åœ¨ `manifest.json` æ–‡ä»¶ä¸­ä½¿ç”¨ `"content_security_policy"` æ¥å£°æ˜æ–°çš„ç­–ç•¥ã€‚ä¾‹å¦‚ï¼š

```json
{
  "name": "My extension",
  ...
  "content_security_policy": "script-src 'self' https://example.com; object-src 'self'",
  ...
}
```

ä»¥ä¸Šç­–ç•¥è¡¨ç¤ºæ’ä»¶å…è®¸ä»æ‰©å±•åŒ…è‡ªèº«ï¼ˆ'self'ï¼‰å’Œ<https://example.comåŠ è½½è„šæœ¬ï¼Œåªå…è®¸ä»æ‰©å±•åŒ…è‡ªèº«åŠ è½½æ’ä»¶ã€‚>

æ³¨æ„ï¼Œä¿®æ”¹CSPç­–ç•¥åº”è°¨æ…å¤„ç†ï¼Œå› ä¸ºè¿‡äºå®½æ¾çš„CSPç­–ç•¥å¯èƒ½ä¼šå¸¦æ¥å®‰å…¨é£é™©ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æœå¯èƒ½ï¼Œæœ€å¥½ä½¿ç”¨æ’ä»¶çš„åå°è„šæœ¬ï¼ˆbackground scriptï¼‰æ¥åŠ è½½å’Œå¤„ç†è¿œç¨‹æ•°æ®ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨å‰å°é¡µé¢ï¼ˆä¾‹å¦‚å¼¹å‡ºé¡µé¢æˆ–é€‰é¡¹é¡µé¢ï¼‰åŠ è½½è¿œç¨‹è„šæœ¬æˆ–æ ·å¼ã€‚

æ›´å¤šå…³äºCSPçš„ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒ [Chrome æ’ä»¶å¼€å‘å®˜æ–¹æ–‡æ¡£](https://developer.chrome.com/docs/extensions/mv3/contentSecurityPolicy/) ã€‚

## **æ·±å…¥äº†è§£Chrome API**

åœ¨å¼€å‘Chromeæ’ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¼šé¢‘ç¹åœ°ä½¿ç”¨Chrome APIã€‚è¿™äº›APIæä¾›äº†è®¸å¤šåŠŸèƒ½ï¼Œä¾‹å¦‚æ“ä½œæ ‡ç­¾é¡µï¼Œè®¿é—®å’Œä¿®æ”¹ç”¨æˆ·ä¹¦ç­¾ï¼Œå‘é€æ¡Œé¢é€šçŸ¥ï¼Œæ‹¦æˆªå’Œä¿®æ”¹ç½‘ç»œè¯·æ±‚ç­‰ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚

### **æ’ä»¶ä¸­çš„æ¶ˆæ¯ä¼ é€’**

åœ¨æ’ä»¶ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦åœ¨ä¸åŒçš„è„šæœ¬ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œä¾‹å¦‚åœ¨backgroundè„šæœ¬å’Œcontentè„šæœ¬ä¹‹é—´ï¼Œæˆ–è€…åœ¨popupè„šæœ¬å’Œbackgroundè„šæœ¬ä¹‹é—´ã€‚Chromeæä¾›äº†`chrome.runtime.sendMessage`å’Œ`chrome.runtime.onMessage`APIï¼Œç”¨äºåœ¨æ’ä»¶çš„ä¸åŒç»„ä»¶ä¹‹é—´å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªåœ¨contentè„šæœ¬ä¸­å‘é€æ¶ˆæ¯ï¼Œå¹¶åœ¨backgroundè„šæœ¬ä¸­æ¥æ”¶æ¶ˆæ¯çš„ç¤ºä¾‹ï¼š

```javascript
// content script
chrome.runtime.sendMessage({greeting: "hello"}, function(response) {
  console.log(response.farewell);
});

// background script
chrome.runtime.onMessage.addListener(
  function(request, sender, sendResponse) {
    if (request.greeting == "hello")
      sendResponse({farewell: "goodbye"});
  });
```

### **ä½¿ç”¨tabs API**

`chrome.tabs` API å…è®¸æ’ä»¶æ“ä½œæµè§ˆå™¨çš„æ ‡ç­¾é¡µï¼Œä¾‹å¦‚åˆ›å»ºæ–°çš„æ ‡ç­¾é¡µï¼Œå…³é—­æ ‡ç­¾é¡µï¼Œåˆ‡æ¢æ ‡ç­¾é¡µï¼Œä¿®æ”¹æ ‡ç­¾é¡µçš„URLç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåˆ›å»ºæ–°æ ‡ç­¾é¡µçš„ç¤ºä¾‹ï¼š

```javascript
chrome.tabs.create({url: "http://www.example.com"});
```

### **ä½¿ç”¨bookmarks API**

`chrome.bookmarks` API å…è®¸æ’ä»¶æ“ä½œç”¨æˆ·çš„ä¹¦ç­¾ï¼Œä¾‹å¦‚åˆ›å»ºä¹¦ç­¾ï¼Œåˆ é™¤ä¹¦ç­¾ï¼Œæœç´¢ä¹¦ç­¾ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåˆ›å»ºä¹¦ç­¾çš„ç¤ºä¾‹ï¼š

```javascript
chrome.bookmarks.create({
    'parentId': '1',
    'title': 'Extension bookmarks',
    'url': 'http://www.example.com'
});
```

### **ä½¿ç”¨notifications API**

`chrome.notifications` API å…è®¸æ’ä»¶å‘é€æ¡Œé¢é€šçŸ¥ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå‘é€é€šçŸ¥çš„ç¤ºä¾‹ï¼š

```javascript
chrome.notifications.create({
    type: 'basic',
    iconUrl: 'icon.png',
    title: 'Notification title',
    message: 'Notification message'
});
```

### **ä½¿ç”¨webRequest API**

`chrome.webRequest` API å…è®¸æ’ä»¶ç›‘æ§å’Œä¿®æ”¹ç½‘ç»œè¯·æ±‚ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ç›‘å¬æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ï¼Œå¹¶åœ¨æ§åˆ¶å°ä¸­æ‰“å°è¯·æ±‚çš„URLï¼š

```javascript
chrome.webRequest.onBeforeRequest.addListener(
    function(details) { console.log(details.url); },
    {urls: ["<all_urls>"]},
    ["blocking"]
);
```

### **æ›´å¤šAPI**

é™¤äº†ä¸Šè¿°æåˆ°çš„APIï¼ŒChromeè¿˜æä¾›äº†è®¸å¤šå…¶ä»–åŠŸèƒ½å¼ºå¤§çš„APIï¼Œå¯ä»¥æ»¡è¶³ä¸åŒæ’ä»¶çš„éœ€æ±‚ã€‚

#### **storage API**

ç”¨äºåœ¨æ’ä»¶ä¸­å­˜å‚¨å’Œè¯»å–æ•°æ®ã€‚

```js

// ä¿å­˜æ•°æ®
chrome.storage.sync.set({ key: value }, function() {
    console.log("Data saved.");
});

// è¯»å–æ•°æ®
chrome.storage.sync.get("key", function(result) {
    console.log("Data retrieved: ", result.key);
});

```

#### **alarms API**

ç”¨äºåˆ›å»ºå’Œç®¡ç†å®šæ—¶ä»»åŠ¡ã€‚

```js

// åˆ›å»ºå®šæ—¶ä»»åŠ¡
chrome.alarms.create("alarmName", { delayInMinutes: 10 });

// ç›‘å¬å®šæ—¶ä»»åŠ¡è§¦å‘äº‹ä»¶
chrome.alarms.onAlarm.addListener(function(alarm) {
    console.log("Alarm triggered: ", alarm);
});

```

#### **contextMenus API**

ç”¨äºåœ¨æµè§ˆå™¨ä¸Šä¸‹æ–‡èœå•ä¸­æ·»åŠ è‡ªå®šä¹‰èœå•é¡¹ã€‚

```js

// åˆ›å»ºä¸Šä¸‹æ–‡èœå•
chrome.contextMenus.create({
    id: "menuItemId",
    title: "Menu Item",
    contexts: ["page"]
});

// ç›‘å¬èœå•é¡¹ç‚¹å‡»äº‹ä»¶
chrome.contextMenus.onClicked.addListener(function(info, tab) {
    console.log("Menu item clicked: ", info.menuItemId);
});

```

æ›´å¤šè¯¦è§[è°·æ­Œæ’ä»¶API](https://developer.chrome.com/docs/extensions/reference/)

## **ä¸ç½‘é¡µå†…å®¹è¿›è¡Œäº¤äº’**

ä¸ç½‘é¡µå†…å®¹è¿›è¡Œäº¤äº’æ˜¯Chromeæ’ä»¶å¼€å‘ä¸­å¸¸è§çš„éœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡å†…å®¹è„šæœ¬å’Œæ¶ˆæ¯ä¼ é€’æ¥å®ç°ã€‚ä¸‹é¢æ˜¯å¦‚ä½•ä¸ç½‘é¡µå†…å®¹è¿›è¡Œäº¤äº’çš„ç¤ºä¾‹ï¼š

```javascript
// Content script

// ç›‘å¬æ¥è‡ªæ’ä»¶çš„æ¶ˆæ¯
chrome.runtime.onMessage.addListener(function(message, sender, sendResponse) {
    if (message.action === "changeColor") {
        // ä¿®æ”¹ç½‘é¡µå…ƒç´ çš„é¢œè‰²
        document.body.style.backgroundColor = message.color;
        sendResponse({ message: "Color changed!" });
    }
});

// å‘æ’ä»¶å‘é€æ¶ˆæ¯
chrome.runtime.sendMessage({ action: "getData" }, function(response) {
    console.log("Data received from plugin: ", response.data);
});
```

```javascript
// Background script

// å‘å†…å®¹è„šæœ¬å‘é€æ¶ˆæ¯
chrome.tabs.query({ active: true, currentWindow: true }, function(tabs) {
    chrome.tabs.sendMessage(tabs[0].id, { action: "changeColor", color: "#FF0000" }, function(response) {
        console.log("Response from content script: ", response.message);
    });
});

// ç›‘å¬æ¥è‡ªå†…å®¹è„šæœ¬çš„æ¶ˆæ¯
chrome.runtime.onMessage.addListener(function(message, sender, sendResponse) {
    if (message.action === "getData") {
        // è·å–æ•°æ®å¹¶å‘é€ç»™å†…å®¹è„šæœ¬
        sendResponse({ data: "Some data from plugin" });
    }
});
```

é€šè¿‡ä»¥ä¸Šä»£ç ï¼Œæ’ä»¶å¯ä»¥å‘å†…å®¹è„šæœ¬å‘é€æ¶ˆæ¯ï¼Œå¹¶ä¸ç½‘é¡µå†…å®¹è¿›è¡Œäº¤äº’ï¼Œä¾‹å¦‚ä¿®æ”¹ç½‘é¡µå…ƒç´ çš„æ ·å¼ã€è·å–ç½‘é¡µä¸­çš„æ•°æ®ç­‰ã€‚

## **ä¿å­˜ç”¨æˆ·è®¾ç½®å’Œæ•°æ®**

æ’ä»¶å¯ä»¥ä½¿ç”¨Chromeçš„å­˜å‚¨APIï¼ˆstorage APIï¼‰æ¥ä¿å­˜ç”¨æˆ·è®¾ç½®å’Œæ•°æ®ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨storage APIä¿å­˜å’Œè¯»å–æ•°æ®çš„ç¤ºä¾‹ï¼š

```javascript
// ä¿å­˜æ•°æ®
chrome.storage.sync.set({ key: value }, function() {
    console.log("Data saved.");
});

// è¯»å–æ•°æ®
chrome.storage.sync.get("key", function(result) {
    console.log("Data retrieved: ", result.key);
});
```

ä»¥ä¸Šä»£ç ä½¿ç”¨ `chrome.storage.sync` æ¥ä¿å­˜å’Œè¯»å–æ•°æ®ï¼Œæ•°æ®ä¼šä¸ç”¨æˆ·çš„Chromeè´¦å·å…³è”ï¼Œå¯åœ¨ä¸åŒè®¾å¤‡é—´åŒæ­¥ã€‚

## **å®ç°æ’ä»¶çš„å›½é™…åŒ–**

æ’ä»¶çš„å›½é™…åŒ–æ˜¯ä¸ºäº†è®©æ’ä»¶èƒ½å¤Ÿæ”¯æŒå¤šè¯­è¨€ç¯å¢ƒï¼Œå¹¶æä¾›ä¸åŒè¯­è¨€çš„ç¿»è¯‘ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•å®ç°æ’ä»¶çš„å›½é™…åŒ–çš„ç¤ºä¾‹ï¼š

1. åœ¨æ’ä»¶çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º `_locales` çš„æ–‡ä»¶å¤¹ã€‚

2. åœ¨ `_locales` æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªå­æ–‡ä»¶å¤¹ï¼Œä»¥è¯­è¨€ä»£ç å‘½åï¼ˆä¾‹å¦‚ `en` è¡¨ç¤ºè‹±è¯­ï¼Œ`zh_CN` è¡¨ç¤ºç®€ä½“ä¸­æ–‡ï¼‰ã€‚

3. åœ¨æ¯ä¸ªè¯­è¨€ä»£ç çš„æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª `messages.json` æ–‡ä»¶ï¼Œç”¨äºå­˜å‚¨å¯¹åº”è¯­è¨€çš„ç¿»è¯‘ã€‚

   ä¾‹å¦‚ï¼Œåœ¨ `en` æ–‡ä»¶å¤¹ä¸­çš„ `messages.json` å¯ä»¥åŒ…å«å¦‚ä¸‹å†…å®¹ï¼š

   ```json
   {
     "pluginTitle": {
       "message": "My Plugin"
     },
     "greeting": {
       "message": "Hello, world!"
     }
   }
  
 ```

4. åœ¨æ’ä»¶çš„ä»£ç ä¸­ä½¿ç”¨ `chrome.i18n.getMessage` æ–¹æ³•æ¥è·å–å¯¹åº”è¯­è¨€çš„ç¿»è¯‘ã€‚

   ```javascript
   // è·å–æ’ä»¶æ ‡é¢˜çš„ç¿»è¯‘
   var pluginTitle = chrome.i18n.getMessage("pluginTitle");

   // è·å–é—®å€™è¯­çš„ç¿»è¯‘
   var greeting = chrome.i18n.getMessage("greeting");
   ```

   å¦‚æœå½“å‰è¯­è¨€ç¯å¢ƒæ²¡æœ‰å¯¹åº”çš„ç¿»è¯‘ï¼Œå°†ä¼šä½¿ç”¨é»˜è®¤çš„ç¿»è¯‘ï¼ˆé»˜è®¤ç¿»è¯‘å¯ä»¥åœ¨ `messages.json` ä¸­æŒ‡å®šï¼‰ã€‚

é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæ’ä»¶å¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¯­è¨€è®¾ç½®è‡ªåŠ¨åŠ è½½å¯¹åº”çš„ç¿»è¯‘æ–‡ä»¶ï¼Œå®ç°å›½é™…åŒ–åŠŸèƒ½ã€‚

è¯·æ³¨æ„ï¼Œåœ¨ `manifest.json` æ–‡ä»¶ä¸­çš„ `"default_locale"` å­—æ®µä¸­æŒ‡å®šæ’ä»¶çš„é»˜è®¤è¯­è¨€ã€‚

```json
{
  "name": "My Plugin",
  ...
  "default_locale": "en",
  ...
}
```

## **æ’ä»¶æµ‹è¯•ä¸è°ƒè¯•**

åœ¨å¼€å‘Chromeæ’ä»¶æ—¶ï¼Œæµ‹è¯•å’Œè°ƒè¯•æ˜¯éå¸¸é‡è¦çš„æ­¥éª¤ï¼Œä»¥ç¡®ä¿æ’ä»¶çš„åŠŸèƒ½æ­£å¸¸å¹¶ä¸”ç¬¦åˆé¢„æœŸã€‚ä¸‹é¢æ˜¯å…³äºæ’ä»¶æµ‹è¯•å’Œè°ƒè¯•çš„è¯¦ç»†å†…å®¹ã€‚

### **Chromeæ’ä»¶çš„è°ƒè¯•æŠ€å·§**

è°ƒè¯•æ˜¯å¼€å‘è¿‡ç¨‹ä¸­è§£å†³é—®é¢˜å’Œæ”¹è¿›æ’ä»¶çš„å…³é”®æ­¥éª¤ä¹‹ä¸€ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„Chromeæ’ä»¶è°ƒè¯•æŠ€å·§ï¼š

- ä½¿ç”¨`console.log()`æ‰“å°è°ƒè¯•ä¿¡æ¯ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨`console.log()`åœ¨å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°ä¸­è¾“å‡ºä¿¡æ¯ï¼Œä»¥ä¾¿æŸ¥çœ‹å˜é‡çš„å€¼ã€ä»£ç çš„æ‰§è¡Œæµç¨‹ç­‰ã€‚

```javascript
console.log("Variable value:", variable);
```

- ä½¿ç”¨`debugger`å…³é”®å­—è®¾ç½®æ–­ç‚¹ï¼šåœ¨ä»£ç ä¸­æ’å…¥`debugger`å…³é”®å­—å¯ä»¥åœ¨å¼€å‘è€…å·¥å…·ä¸­è®¾ç½®æ–­ç‚¹ï¼Œå½“ä»£ç æ‰§è¡Œåˆ°æ­¤å¤„æ—¶ä¼šæš‚åœæ‰§è¡Œï¼Œä»¥ä¾¿è¿›è¡Œé€è¡Œè°ƒè¯•ã€‚

```javascript
function myFunction() {
    // ...
    debugger;
    // ...
}
```

- ä½¿ç”¨`chrome.runtime.onInstalled`äº‹ä»¶ï¼šå¯ä»¥åœ¨æ’ä»¶å®‰è£…æˆ–æ›´æ–°æ—¶ï¼Œç›‘å¬`chrome.runtime.onInstalled`äº‹ä»¶æ¥æ‰§è¡Œä¸€äº›è°ƒè¯•ä»»åŠ¡ï¼Œå¦‚åˆå§‹åŒ–æ•°æ®ã€æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯ç­‰ã€‚

```javascript
chrome.runtime.onInstalled.addListener(function(details) {
    if (details.reason == "install") {
        console.log("Extension installed.");
    } else if (details.reason == "update") {
        console.log("Extension updated.");
    }
});
```

- ä½¿ç”¨Chromeå¼€å‘è€…å·¥å…·ï¼šChromeæä¾›äº†å¼ºå¤§çš„å¼€å‘è€…å·¥å…·ï¼ŒåŒ…æ‹¬å…ƒç´ æ£€æŸ¥ã€ç½‘ç»œç›‘æ§ã€æ€§èƒ½åˆ†æç­‰åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©è°ƒè¯•å’Œä¼˜åŒ–æ’ä»¶çš„å¼€å‘è¿‡ç¨‹ã€‚

è¿™äº›è°ƒè¯•æŠ€å·§å¯ä»¥å¸®åŠ©å¼€å‘è€…å®šä½é—®é¢˜ã€è¿½è¸ªä»£ç æ‰§è¡Œï¼Œä»¥åŠä¼˜åŒ–æ’ä»¶çš„å¼€å‘è¿‡ç¨‹ã€‚

### **ä½¿ç”¨automated testingè¿›è¡Œæ’ä»¶æµ‹è¯•**

è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆautomated testingï¼‰æ˜¯ä¸€ç§åœ¨å¼€å‘è¿‡ç¨‹ä¸­è‡ªåŠ¨æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹çš„æ–¹æ³•ï¼Œå¯ä»¥æé«˜æµ‹è¯•æ•ˆç‡å¹¶ç¡®ä¿æ’ä»¶çš„åŠŸèƒ½å’Œç¨³å®šæ€§ã€‚

åœ¨Chromeæ’ä»¶å¼€å‘ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›æµ‹è¯•æ¡†æ¶å’Œå·¥å…·æ¥è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¾‹å¦‚ï¼š

- **Jasmine**ï¼šæ˜¯ä¸€ä¸ªæµè¡Œçš„JavaScriptæµ‹è¯•æ¡†æ¶ï¼Œå¯ä»¥ç”¨äºç¼–å†™å’Œæ‰§è¡Œå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰ã€‚

```javascript
describe("MyPlugin", function() {
    it("should do something", function() {
        expect(myPlugin.doSomething()).toBe(true);
    });

    it("should handle async operations", function(done) {
        myPlugin.doAsyncOperation(function(result) {
            expect(result).toBe(true);
            done();
        });
    });
});
```

- **Selenium WebDriver**ï¼šæ˜¯ä¸€ä¸ªç”¨äºè‡ªåŠ¨åŒ–æµè§ˆå™¨æ“ä½œçš„å·¥å…·ï¼Œå¯ä»¥æ¨¡æ‹Ÿç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­çš„äº¤äº’è¡Œä¸ºï¼Œç”¨äºç¼–å†™ç«¯åˆ°ç«¯ï¼ˆend-to-endï¼‰æµ‹è¯•ã€‚

```javascript
const { Builder, By, Key } = require("selenium-webdriver");

async function myTest() {


    let driver = await new Builder().forBrowser("chrome").build();
    try {
        await driver.get("https://www.example.com");
        await driver.findElement(By.name("q")).sendKeys("test", Key.ENTER);
        let title = await driver.getTitle();
        console.log("Page title:", title);
    } finally {
        await driver.quit();
    }
}

myTest();
```

ä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•å¯ä»¥å¸®åŠ©å¼€å‘è€…éªŒè¯æ’ä»¶çš„åŠŸèƒ½å’Œæ€§èƒ½ï¼Œé™ä½äººä¸ºé”™è¯¯çš„å‘ç”Ÿï¼Œå¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚

### **ä½¿ç”¨DevToolsè¿›è¡Œæ€§èƒ½åˆ†æ**

Chromeå¼€å‘è€…å·¥å…·æä¾›äº†å¼ºå¤§çš„æ€§èƒ½åˆ†æåŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ‰¾å‡ºæ’ä»¶ä¸­çš„æ€§èƒ½ç“¶é¢ˆå’Œä¼˜åŒ–ç‚¹ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨DevToolsè¿›è¡Œæ€§èƒ½åˆ†æçš„æ­¥éª¤ï¼š

1. æ‰“å¼€Chromeå¼€å‘è€…å·¥å…·ï¼ˆå¿«æ·é”®ï¼šF12ï¼‰ã€‚

2. åˆ‡æ¢åˆ°"Performance"é€‰é¡¹å¡ã€‚

3. ç‚¹å‡»"Record"æŒ‰é’®å¼€å§‹å½•åˆ¶æ€§èƒ½æ•°æ®ã€‚

4. è¿›è¡Œä¸€äº›æ“ä½œï¼Œä»¥è§¦å‘æ’ä»¶çš„åŠŸèƒ½ã€‚

5. åœæ­¢å½•åˆ¶ï¼Œåˆ†ææ€§èƒ½æ•°æ®ã€‚

åœ¨æ€§èƒ½åˆ†æç»“æœä¸­ï¼Œå¯ä»¥æŸ¥çœ‹å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ã€å†…å­˜ä½¿ç”¨æƒ…å†µã€é¡µé¢åŠ è½½æ—¶é—´ç­‰ä¿¡æ¯ï¼Œä»¥ä¾¿æ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆå’Œè¿›è¡Œä¼˜åŒ–ã€‚

æ€§èƒ½åˆ†æå¯ä»¥å¸®åŠ©å¼€å‘è€…ä¼˜åŒ–æ’ä»¶çš„æ‰§è¡Œæ•ˆç‡å’Œèµ„æºå ç”¨ï¼Œæé«˜æ’ä»¶çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

## **æ’ä»¶å‘å¸ƒä¸ç»´æŠ¤**

åœ¨å¼€å‘å®Œæˆåï¼Œå°†æ’ä»¶å‘å¸ƒåˆ°Chrome Web Storeæ˜¯ä½¿å…¶å¯ä¾›ç”¨æˆ·ä¸‹è½½å’Œå®‰è£…çš„å…³é”®æ­¥éª¤ã€‚åŒæ—¶ï¼Œå¯¹äºå·²å‘å¸ƒçš„æ’ä»¶ï¼Œç»´æŠ¤å’Œç®¡ç†ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ã€‚ä»¥ä¸‹æ˜¯å…³äºæ’ä»¶å‘å¸ƒä¸ç»´æŠ¤çš„è¯¦ç»†å†…å®¹ã€‚

### **åœ¨Chrome Web Storeå‘å¸ƒå’Œæ›´æ–°æ’ä»¶**

å°†æ’ä»¶å‘å¸ƒåˆ°Chrome Web Storeå¯ä»¥è®©ç”¨æˆ·è½»æ¾æ‰¾åˆ°ã€å®‰è£…å’Œä½¿ç”¨æ’ä»¶ã€‚ä»¥ä¸‹æ˜¯å‘å¸ƒå’Œæ›´æ–°æ’ä»¶çš„æ­¥éª¤ï¼š

1. ç™»å½•åˆ°[Chromeå¼€å‘è€…æ§åˆ¶å°](https://chrome.google.com/webstore/devconsole)ã€‚

2. åˆ›å»ºä¸€ä¸ªæ–°çš„å¼€å‘è€…è´¦å·æˆ–ä½¿ç”¨ç°æœ‰çš„è´¦å·ã€‚

3. åœ¨å¼€å‘è€…æ§åˆ¶å°ä¸­ï¼Œé€‰æ‹©"å¼€å‘è€…ä¸­å¿ƒ"å¹¶ç‚¹å‡»"æ–°å¢é¡¹ç›®"æŒ‰é’®ã€‚

4. æä¾›æ’ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬åç§°ã€æè¿°ã€å›¾æ ‡ç­‰ã€‚

5. ä¸Šä¼ æ’ä»¶çš„å‹ç¼©æ–‡ä»¶ï¼ˆ`.zip`æ ¼å¼ï¼‰ï¼Œå…¶ä¸­åŒ…å«äº†æ’ä»¶çš„æ‰€æœ‰æ–‡ä»¶å’Œèµ„æºã€‚

6. å¡«å†™å…¶ä»–å¿…è¦çš„ä¿¡æ¯ï¼Œå¦‚åˆ†ç±»ã€è¯­è¨€ã€éšç§æ”¿ç­–ç­‰ã€‚

7. éªŒè¯æ’ä»¶çš„æ‰€æœ‰æƒé™ï¼Œå¹¶ç¡®ä¿æ’ä»¶ç¬¦åˆChrome Web Storeçš„è§„å®šå’Œæ”¿ç­–ã€‚

8. æäº¤æ’ä»¶è¿›è¡Œå®¡æ ¸ã€‚å®¡æ ¸è¿‡ç¨‹å¯èƒ½éœ€è¦å‡ å¤©æ—¶é—´ã€‚

9. ä¸€æ—¦æ’ä»¶å®¡æ ¸é€šè¿‡ï¼Œå®ƒå°†åœ¨Chrome Web Storeä¸Šå¯è§ï¼Œç”¨æˆ·å¯ä»¥è¿›è¡Œå®‰è£…ã€‚

10. å¯¹äºæ›´æ–°æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡ä¸Šä¼ æ–°ç‰ˆæœ¬çš„å‹ç¼©æ–‡ä»¶å¹¶æ›´æ–°æ’ä»¶çš„ä¿¡æ¯ã€‚

åœ¨å‘å¸ƒå’Œæ›´æ–°æ’ä»¶æ—¶ï¼Œéœ€è¦ç¡®ä¿æ’ä»¶çš„å®Œæ•´æ€§ã€å®‰å…¨æ€§ï¼Œå¹¶éµå®ˆChrome Web Storeçš„è§„å®šå’Œæ”¿ç­–ã€‚

### **æ’ä»¶çš„ç‰ˆæœ¬ç®¡ç†ä¸é”™è¯¯å¤„ç†**

åœ¨æ’ä»¶çš„å¼€å‘å’Œç»´æŠ¤è¿‡ç¨‹ä¸­ï¼Œç‰ˆæœ¬ç®¡ç†å’Œé”™è¯¯å¤„ç†æ˜¯éå¸¸é‡è¦çš„ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ç‰ˆæœ¬ç®¡ç†å’Œé”™è¯¯å¤„ç†æŠ€å·§ï¼š

- **ç‰ˆæœ¬ç®¡ç†**ï¼šå¯¹äºæ’ä»¶çš„æ¯ä¸ªå‘å¸ƒç‰ˆæœ¬ï¼Œåº”ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·ï¼ˆSemantic Versioningï¼‰æ¥ç®¡ç†ã€‚å¯ä»¥åœ¨æ’ä»¶çš„`manifest.json`æ–‡ä»¶ä¸­æŒ‡å®šç‰ˆæœ¬å·ï¼Œå¹¶ç¡®ä¿æ¯ä¸ªç‰ˆæœ¬çš„æ›´æ–°éƒ½æœ‰æ˜ç¡®çš„å˜æ›´è®°å½•ã€‚

```json
{
  "manifest_version": 2,
  "version": "1.0.0",
  ...
}
```

- **é”™è¯¯å¤„ç†**ï¼šåœ¨æ’ä»¶ä¸­ä½¿ç”¨é€‚å½“çš„é”™è¯¯å¤„ç†æœºåˆ¶å¯ä»¥æé«˜æ’ä»¶çš„å¥å£®æ€§ã€‚å¯ä»¥ä½¿ç”¨`try...catch`è¯­å¥æ¥æ•è·å¹¶å¤„ç†å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œä»¥åŠä½¿ç”¨`console.error()`æ–¹æ³•å°†é”™è¯¯ä¿¡æ¯è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚

```javascript
try {
  // ä»£ç å—å¯èƒ½æŠ›å‡ºé”™è¯¯çš„éƒ¨åˆ†
} catch (error) {
  console.error("An error occurred:", error);
}
```

é€šè¿‡åˆç†çš„ç‰ˆæœ¬ç®¡ç†å’Œæœ‰æ•ˆçš„é”™è¯¯å¤„ç†ï¼Œå¯ä»¥æ›´å¥½åœ°ç»´æŠ¤å’Œç®¡ç†æ’ä»¶ï¼ŒåŠæ—¶ä¿®å¤bugå¹¶æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

### **æ’ä»¶çš„å®‰å…¨æ€§å’Œéšç§ä¿æŠ¤**

åœ¨æ’ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç¡®ä¿æ’ä»¶çš„å®‰å…¨æ€§å’Œä¿æŠ¤ç”¨æˆ·éšç§æ˜¯è‡³å…³é‡è¦çš„ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„å®‰å…¨æ€§å’Œéšç§ä¿æŠ¤æªæ–½ï¼š

- **æƒé™ç®¡ç†**ï¼šåœ¨`manifest.json`æ–‡ä»¶ä¸­ï¼Œåªæˆäºˆæ’ä»¶æ‰€éœ€çš„æœ€å°æƒé™ã€‚ä¸è¦æˆäºˆè¿‡å¤šçš„æƒé™ï¼Œä»¥é¿å…æ»¥ç”¨ç”¨æˆ·çš„éšç§ã€‚

```json
{
  "manifest_version": 2,
  "permissions": [
    "storage",
    "tabs"
  ],
  ...
}
```

- **æ•°æ®ä¿æŠ¤**ï¼šåœ¨å¤„ç†ç”¨æˆ·æ•°æ®æ—¶ï¼Œé‡‡å–é€‚å½“çš„å®‰å…¨æªæ–½ï¼Œå¦‚æ•°æ®åŠ å¯†ã€å®‰å…¨ä¼ è¾“ç­‰ï¼Œä»¥é˜²æ­¢æ•°æ®æ³„éœ²æˆ–è¢«æ¶æ„ä½¿ç”¨ã€‚

- **æ›´æ–°æ£€æŸ¥**ï¼šå®šæœŸæ£€æŸ¥æ’ä»¶çš„æ›´æ–°å¹¶åŠæ—¶åº”ç”¨ï¼Œä»¥ä¿®å¤å®‰å…¨æ¼æ´å’Œé”™è¯¯ï¼Œå¹¶æä¾›ç”¨æˆ·æ‰€éœ€çš„æ–°åŠŸèƒ½ã€‚

- **å®‰å…¨å®¡æŸ¥**ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿›è¡Œå®‰å…¨å®¡æŸ¥ï¼ŒåŒ…æ‹¬ä»£ç å®¡æŸ¥å’Œæ¼æ´æ‰«æï¼Œä»¥ç¡®ä¿æ’ä»¶æ²¡æœ‰æ½œåœ¨çš„å®‰å…¨é—®é¢˜ã€‚

- **éšç§æ”¿ç­–**ï¼šå¦‚æœæ’ä»¶æ”¶é›†ç”¨æˆ·ä¸ªäººä¿¡æ¯ï¼Œåº”æä¾›æ¸…æ™°çš„éšç§æ”¿ç­–ï¼Œå¹¶éµå®ˆç›¸å…³çš„æ•°æ®ä¿æŠ¤æ³•å¾‹å’Œè§„å®šã€‚

éµå¾ªè¿™äº›å®‰å…¨æ€§å’Œéšç§ä¿æŠ¤æªæ–½ï¼Œå¯ä»¥å¢å¼ºæ’ä»¶çš„å®‰å…¨æ€§ï¼Œä¿æŠ¤ç”¨æˆ·çš„éšç§ï¼Œå¹¶æå‡ç”¨æˆ·å¯¹æ’ä»¶çš„ä¿¡ä»»ã€‚

## **å‚è€ƒèµ„æ–™**

1. [Chromeå¼€å‘è€…æ–‡æ¡£](https://developer.chrome.com/docs/extensions/mv3/) - Chromeå®˜æ–¹æä¾›çš„å¼€å‘è€…æ–‡æ¡£ï¼ŒåŒ…å«äº†å…¨é¢çš„æ’ä»¶å¼€å‘æŒ‡å—å’ŒAPIå‚è€ƒã€‚

2. [Chromeæ’ä»¶æ•™ç¨‹](https://developer.chrome.com/docs/extensions/mv3/getstarted/) - Chromeå®˜æ–¹æä¾›çš„æ’ä»¶å¼€å‘å…¥é—¨æ•™ç¨‹ï¼Œé€æ­¥ä»‹ç»å¦‚ä½•åˆ›å»ºå’Œå‘å¸ƒæ’ä»¶ã€‚

3. [Chromeæ’ä»¶ç¤ºä¾‹](https://developer.chrome.com/docs/extensions/samples/) - Chromeå®˜æ–¹æä¾›çš„æ’ä»¶ç¤ºä¾‹ä»£ç ï¼Œæ¶µç›–äº†å„ç§åŠŸèƒ½å’Œç”¨ä¾‹ï¼Œå¯ä»¥ä½œä¸ºå‚è€ƒå’Œå­¦ä¹ çš„èµ„æºã€‚

4. [Chromeæ’ä»¶å¼€å‘è€…ç¤¾åŒº](https://groups.google.com/a/chromium.org/g/chromium-extensions) - Chromeæ’ä»¶å¼€å‘è€…ç¤¾åŒºçš„è®ºå›ï¼Œå¯ä»¥åœ¨è¿™é‡Œæé—®ã€è®¨è®ºå’Œäº¤æµæ’ä»¶å¼€å‘çš„ç›¸å…³è¯é¢˜ã€‚

5. [Chromeæ’ä»¶å¼€å‘å·¥å…·](https://developer.chrome.com/docs/extensions/mv3/devtools/) - Chromeå¼€å‘è€…å·¥å…·çš„æ–‡æ¡£ï¼Œä»‹ç»äº†å¦‚ä½•ä½¿ç”¨å¼€å‘è€…å·¥å…·è¿›è¡Œè°ƒè¯•å’Œæ€§èƒ½åˆ†æã€‚

6. [Chrome Web Storeå¼€å‘è€…æ–‡æ¡£](https://developer.chrome.com/docs/webstore/) - Chrome Web Storeçš„å¼€å‘è€…æ–‡æ¡£ï¼Œæä¾›äº†å‘å¸ƒå’Œç®¡ç†æ’ä»¶çš„æŒ‡å—å’Œè¯´æ˜ã€‚

7. [Chromeæ’ä»¶å®‰å…¨æ€§å’Œéšç§ä¿æŠ¤æŒ‡å—](https://developer.chrome.com/docs/extensions/mv3/security/) - Chromeå®˜æ–¹æä¾›çš„æ’ä»¶å®‰å…¨æ€§å’Œéšç§ä¿æŠ¤çš„æŒ‡å—ï¼Œä»‹ç»äº†å¦‚ä½•ç¡®ä¿æ’ä»¶çš„å®‰å…¨æ€§å’Œä¿æŠ¤ç”¨æˆ·éšç§ã€‚
